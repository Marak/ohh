var http = require('http');
var charmer = require('charm');


exports.handler = function(req, stream) {

  var charm = charmer(stream);


  var frames = [
   [
    "   .-.   .-.     .--.                         ",
    "  | OO| | OO|   / _.-'  .-.  .-.  .-.  .''.  ",
    "  |   | |   |   \\  '-.  '-'  '-'  '-'  '..'  ",
    "  '^^^' '^^^'    '--'                         "
   ],
   [
    "    .-.   .-.     .--.                         ",
    "   | OO| | OO|   / _.-' .-.  .-.  .-.  .''.   ",
    "   |   | |   |   \\  '-. '-'  '-'  '-'  '..'   ",
    "   '^^^' '^^^'    '--'                         "
   ],
   [
    "     .-.   .-.     .--.                        ",
    "    | OO| | OO|   / _.-'.-.  .-.  .-.  .''.   ",
    "    |   | |   |   \\  '-.'-'  '-'  '-'  '..'   ",
    "    '^^^' '^^^'    '--'                        "
   ],
   [
    "      .-.   .-.     .--.                       ",
    "     | OO| | OO|   / _.-'-.  .-.  .-.  .''.   ",
    "     |   | |   |   \\  '-.-'  '-'  '-'  '..'   ",
    "     '^^^' '^^^'    '--'                       "
   ],
   [
    "       .-.   .-.     .--.                      ",
    "      | OO| | OO|   / _.-'.  .-.  .-.  .''.   ",
    "      |   | |   |   \\  '-.'  '-'  '-'  '..'   ",
    "      '^^^' '^^^'    '--'                      "
   ],
   [
    "        .-.   .-.     .--.                      ",
    "       | OO| | OO|   / _.-'  .-.  .-.  .''.   ",
    "       |   | |   |   \\  '-.  '-'  '-'  '..'   ",
    "       '^^^' '^^^'    '--'                     "
   ],
   [
    "         .-.   .-.     .--.                     ",
    "        | OO| | OO|   / _.-' .-.  .-.  .''.   ",
    "        |   | |   |   \\  '-. '-'  '-'  '..'   ",
    "        '^^^' '^^^'    '--'                    "
   ],
   [
    "          .-.   .-.     .--.                    ",
    "         | OO| | OO|   / _.-'.-.  .-.  .''.   ",
    "         |   | |   |   \\  '-.'-'  '-'  '..'   ",
    "         '^^^' '^^^'    '--'                   "
   ],
   [
    "           .-.   .-.     .--.                   ",
    "          | OO| | OO|   / _.-'-.  .-.  .''.   ",
    "          |   | |   |   \\  '-.-'  '-'  '..'   ",
    "          '^^^' '^^^'    '--'                   "
   ],
   [
    "            .-.   .-.     .--.                  ",
    "           | OO| | OO|   / _.-'.  .-.  .''.   ",
    "           |   | |   |   \\  '-.'  '-'  '..'   ",
    "           '^^^' '^^^'    '--'                  "
   ],
   [
    "             .-.   .-.     .--.                  ",
    "            | OO| | OO|   / _.-'  .-.  .''.   ",
    "            |   | |   |   \\  '-.  '-'  '..'   ",
    "            '^^^' '^^^'    '--'                 "
   ],
   [
    "              .-.   .-.     .--.                 ",
    "             | OO| | OO|   / _.-' .-.  .''.   ",
    "             |   | |   |   \\  '-. '-'  '..'   ",
    "             '^^^' '^^^'    '--'                "
   ],
   [
    "               .-.   .-.     .--.                ",
    "              | OO| | OO|   / _.-'.-.  .''.   ",
    "              |   | |   |   \\  '-.'-'  '..'   ",
    "              '^^^' '^^^'    '--'               "
   ],
   [
    "                .-.   .-.     .--.               ",
    "               | OO| | OO|   / _.-'-.  .''.   ",
    "               |   | |   |   \\  '-.-'  '..'   ",
    "               '^^^' '^^^'    '--'              "
   ],
   [
    "                 .-.   .-.     .--.              ",
    "                | OO| | OO|   / _.-'.  .''.   ",
    "                |   | |   |   \\  '-.'  '..'   ",
    "                '^^^' '^^^'    '--'             "
   ],
   [
    "                  .-.   .-.     .--.              ",
    "                 | OO| | OO|   / _.-'  .''.   ",
    "                 |   | |   |   \\  '-.  '..'   ",
    "                 '^^^' '^^^'    '--'            "
   ],
   [
    "                   .-.   .-.     .--.             ",
    "                  | OO| | OO|   / _.-' .''.   ",
    "                  |   | |   |   \\  '-. '..'   ",
    "                  '^^^' '^^^'    '--'           "
   ],
   [
    "                    .-.   .-.     .--.            ",
    "                   | OO| | OO|   / _.-'.''.   ",
    "                   |   | |   |   \\  '-.'..'   ",
    "                   '^^^' '^^^'    '--'          "
   ],
   [
    "                     .-.   .-.     .--.           ",
    "                    | OO| | OO|   / _.-'''.   ",
    "                    |   | |   |   \\  '-...'   ",
    "                    '^^^' '^^^'    '--'         "
   ],
   [
    "                      .-.   .-.     .--.          ",
    "                     | OO| | OO|   / _.-''.   ",
    "                     |   | |   |   \\  '-..'   ",
    "                     '^^^' '^^^'    '--'        "
   ],
   [
    "                       .-.   .-.     .--.         ",
    "                      | OO| | OO|   / _.-'.   ",
    "                      |   | |   |   \\  '-.'   ",
    "                      '^^^' '^^^'    '--'       "
   ],
   [
    "                        .-.   .-.     .--.        ",
    "                       | OO| | OO|   / _.-'   ",
    "                       |   | |   |   \\  '-.   ",
    "                       '^^^' '^^^'    '--'      "
   ],
   [
    "                         .-.   .-.     .--.       ",
    "                        | OO| | OO|   / _.-'  ",
    "                        |   | |   |   \\  '-.   ",
    "                        '^^^' '^^^'    '--'    "
   ]

  ];

  charm.on('^C', process.exit);


  setInterval(function(){

    var frame = frames.shift();
    charm.write(frame.join('\n'));
    charm.position(-1 , -1 - frames.length);
    frames.push(frame);
    charm.display('reset');

  }, 200)


};